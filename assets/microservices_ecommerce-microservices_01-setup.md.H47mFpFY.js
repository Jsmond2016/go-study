import{_ as a,c as i,o as n,ag as e}from"./chunks/framework.mZxFZN4m.js";const d=JSON.parse('{"title":"ç¯å¢ƒæ­å»º","description":"","frontmatter":{"title":"ç¯å¢ƒæ­å»º","difficulty":"advanced","duration":"2-3å°æ—¶","prerequisites":["gRPC åŸºç¡€","æœåŠ¡å‘ç°"],"tags":["ç¯å¢ƒ","æ­å»º","é…ç½®","åˆå§‹åŒ–"]},"headers":[],"relativePath":"microservices/ecommerce-microservices/01-setup.md","filePath":"microservices/ecommerce-microservices/01-setup.md","lastUpdated":1763896864000}'),l={name:"microservices/ecommerce-microservices/01-setup.md"};function p(r,s,t,h,k,c){return n(),i("div",null,[...s[0]||(s[0]=[e(`<h1 id="ç¯å¢ƒæ­å»º" tabindex="-1">ç¯å¢ƒæ­å»º <a class="header-anchor" href="#ç¯å¢ƒæ­å»º" aria-label="Permalink to &quot;ç¯å¢ƒæ­å»º&quot;">â€‹</a></h1><p>æœ¬ç« èŠ‚å°†æŒ‡å¯¼ä½ æ­å»ºç”µå•†å¾®æœåŠ¡ç³»ç»Ÿçš„å¼€å‘ç¯å¢ƒï¼ŒåŒ…æ‹¬é¡¹ç›®åˆå§‹åŒ–ã€ä¾èµ–å®‰è£…ã€Protocol Buffers é…ç½®å’ŒæœåŠ¡å‘ç°ç¯å¢ƒã€‚</p><h2 id="ğŸ“‹-å­¦ä¹ ç›®æ ‡" tabindex="-1">ğŸ“‹ å­¦ä¹ ç›®æ ‡ <a class="header-anchor" href="#ğŸ“‹-å­¦ä¹ ç›®æ ‡" aria-label="Permalink to &quot;ğŸ“‹ å­¦ä¹ ç›®æ ‡&quot;">â€‹</a></h2><p>å®Œæˆæœ¬ç« èŠ‚åï¼Œä½ å°†èƒ½å¤Ÿï¼š</p><ul class="contains-task-list"><li class="task-list-item enabled"><input class="task-list-item-checkbox" type="checkbox"> åˆ›å»ºå¾®æœåŠ¡é¡¹ç›®ç›®å½•ç»“æ„</li><li class="task-list-item enabled"><input class="task-list-item-checkbox" type="checkbox"> åˆå§‹åŒ–å„ä¸ªæœåŠ¡çš„ Go æ¨¡å—</li><li class="task-list-item enabled"><input class="task-list-item-checkbox" type="checkbox"> å®‰è£…é¡¹ç›®ä¾èµ–</li><li class="task-list-item enabled"><input class="task-list-item-checkbox" type="checkbox"> é…ç½® Protocol Buffers</li><li class="task-list-item enabled"><input class="task-list-item-checkbox" type="checkbox"> å¯åŠ¨ Consul æœåŠ¡å‘ç°</li><li class="task-list-item enabled"><input class="task-list-item-checkbox" type="checkbox"> è¿è¡Œé¡¹ç›®å¹¶éªŒè¯</li></ul><h2 id="ğŸš€-å¿«é€Ÿå¼€å§‹" tabindex="-1">ğŸš€ å¿«é€Ÿå¼€å§‹ <a class="header-anchor" href="#ğŸš€-å¿«é€Ÿå¼€å§‹" aria-label="Permalink to &quot;ğŸš€ å¿«é€Ÿå¼€å§‹&quot;">â€‹</a></h2><h3 id="_1-åˆ›å»ºé¡¹ç›®ç›®å½•" tabindex="-1">1. åˆ›å»ºé¡¹ç›®ç›®å½• <a class="header-anchor" href="#_1-åˆ›å»ºé¡¹ç›®ç›®å½•" aria-label="Permalink to &quot;1. åˆ›å»ºé¡¹ç›®ç›®å½•&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºé¡¹ç›®æ ¹ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> examples/microservices</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 06-ecommerce-microservices</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 06-ecommerce-microservices</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åˆ›å»ºæœåŠ¡ç›®å½•</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user-service</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> order-service</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> product-service</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gateway</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> proto/{user,order,product}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docs</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_2-åˆå§‹åŒ–-go-æ¨¡å—" tabindex="-1">2. åˆå§‹åŒ– Go æ¨¡å— <a class="header-anchor" href="#_2-åˆå§‹åŒ–-go-æ¨¡å—" aria-label="Permalink to &quot;2. åˆå§‹åŒ– Go æ¨¡å—&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ ¹æ¨¡å—</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> init</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> go-study/examples/microservices/06-ecommerce-microservices</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç”¨æˆ·æœåŠ¡</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user-service</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> init</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> go-study/examples/microservices/06-ecommerce-microservices/user-service</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è®¢å•æœåŠ¡</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ../order-service</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> init</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> go-study/examples/microservices/06-ecommerce-microservices/order-service</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å•†å“æœåŠ¡</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ../product-service</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> init</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> go-study/examples/microservices/06-ecommerce-microservices/product-service</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç½‘å…³</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ../gateway</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> init</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> go-study/examples/microservices/06-ecommerce-microservices/gateway</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="_3-å®‰è£…æ ¸å¿ƒä¾èµ–" tabindex="-1">3. å®‰è£…æ ¸å¿ƒä¾èµ– <a class="header-anchor" href="#_3-å®‰è£…æ ¸å¿ƒä¾èµ–" aria-label="Permalink to &quot;3. å®‰è£…æ ¸å¿ƒä¾èµ–&quot;">â€‹</a></h3><h4 id="ç”¨æˆ·æœåŠ¡ä¾èµ–" tabindex="-1">ç”¨æˆ·æœåŠ¡ä¾èµ– <a class="header-anchor" href="#ç”¨æˆ·æœåŠ¡ä¾èµ–" aria-label="Permalink to &quot;ç”¨æˆ·æœåŠ¡ä¾èµ–&quot;">â€‹</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user-service</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> google.golang.org/grpc</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> google.golang.org/protobuf</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> github.com/hashicorp/consul/api</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> github.com/mattn/go-sqlite3</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="è®¢å•æœåŠ¡ä¾èµ–" tabindex="-1">è®¢å•æœåŠ¡ä¾èµ– <a class="header-anchor" href="#è®¢å•æœåŠ¡ä¾èµ–" aria-label="Permalink to &quot;è®¢å•æœåŠ¡ä¾èµ–&quot;">â€‹</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ../order-service</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> google.golang.org/grpc</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> google.golang.org/protobuf</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> github.com/hashicorp/consul/api</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> github.com/mattn/go-sqlite3</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="å•†å“æœåŠ¡ä¾èµ–" tabindex="-1">å•†å“æœåŠ¡ä¾èµ– <a class="header-anchor" href="#å•†å“æœåŠ¡ä¾èµ–" aria-label="Permalink to &quot;å•†å“æœåŠ¡ä¾èµ–&quot;">â€‹</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ../product-service</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> google.golang.org/grpc</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> google.golang.org/protobuf</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> github.com/hashicorp/consul/api</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> github.com/mattn/go-sqlite3</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="ç½‘å…³ä¾èµ–" tabindex="-1">ç½‘å…³ä¾èµ– <a class="header-anchor" href="#ç½‘å…³ä¾èµ–" aria-label="Permalink to &quot;ç½‘å…³ä¾èµ–&quot;">â€‹</a></h4><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ../gateway</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> github.com/gin-gonic/gin</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> google.golang.org/grpc</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> google.golang.org/protobuf</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> github.com/hashicorp/consul/api</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="ğŸ“-é¡¹ç›®ç»“æ„è¯¦è§£" tabindex="-1">ğŸ“ é¡¹ç›®ç»“æ„è¯¦è§£ <a class="header-anchor" href="#ğŸ“-é¡¹ç›®ç»“æ„è¯¦è§£" aria-label="Permalink to &quot;ğŸ“ é¡¹ç›®ç»“æ„è¯¦è§£&quot;">â€‹</a></h2><h3 id="å®Œæ•´ç›®å½•ç»“æ„" tabindex="-1">å®Œæ•´ç›®å½•ç»“æ„ <a class="header-anchor" href="#å®Œæ•´ç›®å½•ç»“æ„" aria-label="Permalink to &quot;å®Œæ•´ç›®å½•ç»“æ„&quot;">â€‹</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>06-ecommerce-microservices/</span></span>
<span class="line"><span>â”œâ”€â”€ proto/                    # Protocol Buffers å®šä¹‰</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ user/                 # ç”¨æˆ·æœåŠ¡ proto</span></span>
<span class="line"><span>â”‚   â”‚   â””â”€â”€ user.proto</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ order/                # è®¢å•æœåŠ¡ proto</span></span>
<span class="line"><span>â”‚   â”‚   â””â”€â”€ order.proto</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ product/              # å•†å“æœåŠ¡ proto</span></span>
<span class="line"><span>â”‚   â”‚   â””â”€â”€ product.proto</span></span>
<span class="line"><span>â”‚   â””â”€â”€ Makefile              # ä»£ç ç”Ÿæˆè„šæœ¬</span></span>
<span class="line"><span>â”œâ”€â”€ user-service/             # ç”¨æˆ·æœåŠ¡</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ main.go</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ go.mod</span></span>
<span class="line"><span>â”‚   â””â”€â”€ go.sum</span></span>
<span class="line"><span>â”œâ”€â”€ order-service/            # è®¢å•æœåŠ¡</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ main.go</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ go.mod</span></span>
<span class="line"><span>â”‚   â””â”€â”€ go.sum</span></span>
<span class="line"><span>â”œâ”€â”€ product-service/          # å•†å“æœåŠ¡</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ main.go</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ go.mod</span></span>
<span class="line"><span>â”‚   â””â”€â”€ go.sum</span></span>
<span class="line"><span>â”œâ”€â”€ gateway/                  # API ç½‘å…³</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ main.go</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ go.mod</span></span>
<span class="line"><span>â”‚   â””â”€â”€ go.sum</span></span>
<span class="line"><span>â”œâ”€â”€ docs/                     # æ–‡æ¡£</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ architecture.md</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ deployment.md</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ development.md</span></span>
<span class="line"><span>â”‚   â””â”€â”€ api.md</span></span>
<span class="line"><span>â”œâ”€â”€ docker-compose.yml        # Docker Compose é…ç½®</span></span>
<span class="line"><span>â”œâ”€â”€ go.mod                    # æ ¹æ¨¡å—</span></span>
<span class="line"><span>â””â”€â”€ README.md                 # é¡¹ç›®è¯´æ˜</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h3 id="ç›®å½•è¯´æ˜" tabindex="-1">ç›®å½•è¯´æ˜ <a class="header-anchor" href="#ç›®å½•è¯´æ˜" aria-label="Permalink to &quot;ç›®å½•è¯´æ˜&quot;">â€‹</a></h3><ul><li><strong>proto/</strong>: å­˜æ”¾æ‰€æœ‰æœåŠ¡çš„ Protocol Buffers å®šä¹‰æ–‡ä»¶</li><li><strong>user-service/</strong>: ç”¨æˆ·æœåŠ¡ï¼Œå¤„ç†ç”¨æˆ·ç›¸å…³ä¸šåŠ¡</li><li><strong>order-service/</strong>: è®¢å•æœåŠ¡ï¼Œå¤„ç†è®¢å•ç›¸å…³ä¸šåŠ¡</li><li><strong>product-service/</strong>: å•†å“æœåŠ¡ï¼Œå¤„ç†å•†å“ç›¸å…³ä¸šåŠ¡</li><li><strong>gateway/</strong>: API ç½‘å…³ï¼Œç»Ÿä¸€å…¥å£å’Œè·¯ç”±è½¬å‘</li><li><strong>docs/</strong>: é¡¹ç›®æ–‡æ¡£</li></ul><h2 id="ğŸ”§-protocol-buffers-é…ç½®" tabindex="-1">ğŸ”§ Protocol Buffers é…ç½® <a class="header-anchor" href="#ğŸ”§-protocol-buffers-é…ç½®" aria-label="Permalink to &quot;ğŸ”§ Protocol Buffers é…ç½®&quot;">â€‹</a></h2><h3 id="_1-å®‰è£…-protocol-buffers-ç¼–è¯‘å™¨" tabindex="-1">1. å®‰è£… Protocol Buffers ç¼–è¯‘å™¨ <a class="header-anchor" href="#_1-å®‰è£…-protocol-buffers-ç¼–è¯‘å™¨" aria-label="Permalink to &quot;1. å®‰è£… Protocol Buffers ç¼–è¯‘å™¨&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># macOS</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">brew</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> protobuf</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Linux</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apt-get</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> protobuf-compiler</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># éªŒè¯å®‰è£…</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">protoc</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --version</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_2-å®‰è£…-go-æ’ä»¶" tabindex="-1">2. å®‰è£… Go æ’ä»¶ <a class="header-anchor" href="#_2-å®‰è£…-go-æ’ä»¶" aria-label="Permalink to &quot;2. å®‰è£… Go æ’ä»¶&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> google.golang.org/protobuf/cmd/protoc-gen-go@latest</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> google.golang.org/grpc/cmd/protoc-gen-go-grpc@latest</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_3-åˆ›å»º-makefile" tabindex="-1">3. åˆ›å»º Makefile <a class="header-anchor" href="#_3-åˆ›å»º-makefile" aria-label="Permalink to &quot;3. åˆ›å»º Makefile&quot;">â€‹</a></h3><p>åœ¨ <code>proto/</code> ç›®å½•ä¸‹åˆ›å»º <code>Makefile</code>ï¼š</p><div class="language-makefile vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">makefile</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.PHONY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: proto clean</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">proto</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">echo &quot;ç”Ÿæˆ Go ä»£ç ...&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	protoc --go_out=. --go_opt=paths=source_relative </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		--go-grpc_out=. --go-grpc_opt=paths=source_relative </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">		user/user.proto order/order.proto product/product.proto</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">clean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	@</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">echo &quot;æ¸…ç†ç”Ÿæˆçš„æ–‡ä»¶...&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	rm -rf user/*.pb.go</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	rm -rf order/*.pb.go</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	rm -rf product/*.pb.go</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_4-ç”Ÿæˆä»£ç " tabindex="-1">4. ç”Ÿæˆä»£ç  <a class="header-anchor" href="#_4-ç”Ÿæˆä»£ç " aria-label="Permalink to &quot;4. ç”Ÿæˆä»£ç &quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> proto</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> proto</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="ğŸ—ï¸-consul-æœåŠ¡å‘ç°é…ç½®" tabindex="-1">ğŸ—ï¸ Consul æœåŠ¡å‘ç°é…ç½® <a class="header-anchor" href="#ğŸ—ï¸-consul-æœåŠ¡å‘ç°é…ç½®" aria-label="Permalink to &quot;ğŸ—ï¸ Consul æœåŠ¡å‘ç°é…ç½®&quot;">â€‹</a></h2><h3 id="_1-å®‰è£…-consul" tabindex="-1">1. å®‰è£… Consul <a class="header-anchor" href="#_1-å®‰è£…-consul" aria-label="Permalink to &quot;1. å®‰è£… Consul&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># macOS</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">brew</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> consul</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Linux</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://releases.hashicorp.com/consul/1.16.0/consul_1.16.0_linux_amd64.zip</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unzip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> consul_1.16.0_linux_amd64.zip</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> consul</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/bin/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_2-å¯åŠ¨-consul" tabindex="-1">2. å¯åŠ¨ Consul <a class="header-anchor" href="#_2-å¯åŠ¨-consul" aria-label="Permalink to &quot;2. å¯åŠ¨ Consul&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¼€å‘æ¨¡å¼å¯åŠ¨</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">consul</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> agent</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -dev</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æˆ–è€…ä½¿ç”¨ Docker</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> consul</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 8500:8500</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> consul:latest</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_3-éªŒè¯-consul" tabindex="-1">3. éªŒè¯ Consul <a class="header-anchor" href="#_3-éªŒè¯-consul" aria-label="Permalink to &quot;3. éªŒè¯ Consul&quot;">â€‹</a></h3><p>è®¿é—® Consul UI: <a href="http://localhost:8500" target="_blank" rel="noreferrer">http://localhost:8500</a></p><p>æˆ–ä½¿ç”¨å‘½ä»¤è¡Œï¼š</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">consul</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> members</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:8500/v1/agent/services</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="ğŸ“-é…ç½®æ–‡ä»¶" tabindex="-1">ğŸ“ é…ç½®æ–‡ä»¶ <a class="header-anchor" href="#ğŸ“-é…ç½®æ–‡ä»¶" aria-label="Permalink to &quot;ğŸ“ é…ç½®æ–‡ä»¶&quot;">â€‹</a></h2><h3 id="ç¯å¢ƒå˜é‡" tabindex="-1">ç¯å¢ƒå˜é‡ <a class="header-anchor" href="#ç¯å¢ƒå˜é‡" aria-label="Permalink to &quot;ç¯å¢ƒå˜é‡&quot;">â€‹</a></h3><p>å„æœåŠ¡å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®ï¼š</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Consul åœ°å€</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CONSUL_ADDR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">localhost:8500</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æœåŠ¡ç«¯å£</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> USER_SERVICE_PORT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5001</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ORDER_SERVICE_PORT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5002</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PRODUCT_SERVICE_PORT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5003</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> GATEWAY_PORT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8080</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="docker-compose-é…ç½®" tabindex="-1">Docker Compose é…ç½® <a class="header-anchor" href="#docker-compose-é…ç½®" aria-label="Permalink to &quot;Docker Compose é…ç½®&quot;">â€‹</a></h3><p>åˆ›å»º <code>docker-compose.yml</code>ï¼š</p><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;3.8&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  consul</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">consul:latest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">consul</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;8500:8500&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">consul agent -dev -client=0.0.0.0 -ui</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">microservices</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">networks</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  microservices</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    driver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bridge</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>å¯åŠ¨ Consulï¼š</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker-compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> consul</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="âœ…-éªŒè¯ç¯å¢ƒ" tabindex="-1">âœ… éªŒè¯ç¯å¢ƒ <a class="header-anchor" href="#âœ…-éªŒè¯ç¯å¢ƒ" aria-label="Permalink to &quot;âœ… éªŒè¯ç¯å¢ƒ&quot;">â€‹</a></h2><h3 id="_1-æ£€æŸ¥-go-ç¯å¢ƒ" tabindex="-1">1. æ£€æŸ¥ Go ç¯å¢ƒ <a class="header-anchor" href="#_1-æ£€æŸ¥-go-ç¯å¢ƒ" aria-label="Permalink to &quot;1. æ£€æŸ¥ Go ç¯å¢ƒ&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> version</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_2-æ£€æŸ¥-protocol-buffers" tabindex="-1">2. æ£€æŸ¥ Protocol Buffers <a class="header-anchor" href="#_2-æ£€æŸ¥-protocol-buffers" aria-label="Permalink to &quot;2. æ£€æŸ¥ Protocol Buffers&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">protoc</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --version</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">which</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> protoc-gen-go</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">which</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> protoc-gen-go-grpc</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_3-æ£€æŸ¥-consul" tabindex="-1">3. æ£€æŸ¥ Consul <a class="header-anchor" href="#_3-æ£€æŸ¥-consul" aria-label="Permalink to &quot;3. æ£€æŸ¥ Consul&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">consul</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> version</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:8500/v1/status/leader</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="ğŸ›-å¸¸è§é—®é¢˜" tabindex="-1">ğŸ› å¸¸è§é—®é¢˜ <a class="header-anchor" href="#ğŸ›-å¸¸è§é—®é¢˜" aria-label="Permalink to &quot;ğŸ› å¸¸è§é—®é¢˜&quot;">â€‹</a></h2><h3 id="protocol-buffers-ç”Ÿæˆå¤±è´¥" tabindex="-1">Protocol Buffers ç”Ÿæˆå¤±è´¥ <a class="header-anchor" href="#protocol-buffers-ç”Ÿæˆå¤±è´¥" aria-label="Permalink to &quot;Protocol Buffers ç”Ÿæˆå¤±è´¥&quot;">â€‹</a></h3><p><strong>é—®é¢˜</strong>: <code>protoc: command not found</code></p><p><strong>è§£å†³</strong>: ç¡®ä¿å·²å®‰è£… protobuf ç¼–è¯‘å™¨ï¼Œå¹¶æ·»åŠ åˆ° PATH</p><h3 id="go-æ’ä»¶æœªæ‰¾åˆ°" tabindex="-1">Go æ’ä»¶æœªæ‰¾åˆ° <a class="header-anchor" href="#go-æ’ä»¶æœªæ‰¾åˆ°" aria-label="Permalink to &quot;Go æ’ä»¶æœªæ‰¾åˆ°&quot;">â€‹</a></h3><p><strong>é—®é¢˜</strong>: <code>protoc-gen-go: program not found</code></p><p><strong>è§£å†³</strong>:</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$PATH:$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> env</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GOPATH</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)/bin</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="consul-è¿æ¥å¤±è´¥" tabindex="-1">Consul è¿æ¥å¤±è´¥ <a class="header-anchor" href="#consul-è¿æ¥å¤±è´¥" aria-label="Permalink to &quot;Consul è¿æ¥å¤±è´¥&quot;">â€‹</a></h3><p><strong>é—®é¢˜</strong>: æœåŠ¡æ— æ³•è¿æ¥åˆ° Consul</p><p><strong>è§£å†³</strong>:</p><ul><li>æ£€æŸ¥ Consul æ˜¯å¦è¿è¡Œ: <code>consul members</code></li><li>æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨: <code>lsof -i :8500</code></li><li>æ£€æŸ¥é˜²ç«å¢™è®¾ç½®</li></ul><h3 id="ç«¯å£å†²çª" tabindex="-1">ç«¯å£å†²çª <a class="header-anchor" href="#ç«¯å£å†²çª" aria-label="Permalink to &quot;ç«¯å£å†²çª&quot;">â€‹</a></h3><p><strong>é—®é¢˜</strong>: ç«¯å£å·²è¢«å ç”¨</p><p><strong>è§£å†³</strong>:</p><ul><li>ä¿®æ”¹æœåŠ¡ç«¯å£é…ç½®</li><li>æˆ–åœæ­¢å ç”¨ç«¯å£çš„è¿›ç¨‹</li></ul><h2 id="ğŸ“š-ä¸‹ä¸€æ­¥" tabindex="-1">ğŸ“š ä¸‹ä¸€æ­¥ <a class="header-anchor" href="#ğŸ“š-ä¸‹ä¸€æ­¥" aria-label="Permalink to &quot;ğŸ“š ä¸‹ä¸€æ­¥&quot;">â€‹</a></h2><p>ç¯å¢ƒæ­å»ºå®Œæˆåï¼Œå¯ä»¥ç»§ç»­ï¼š</p><ol><li><a href="./02-architecture.html">æ¶æ„è®¾è®¡</a> - äº†è§£ç³»ç»Ÿæ¶æ„è®¾è®¡</li><li><a href="./03-user-service.html">ç”¨æˆ·æœåŠ¡</a> - å®ç°ç¬¬ä¸€ä¸ªå¾®æœåŠ¡</li></ol><hr><p><strong>âœ… ç¯å¢ƒæ­å»ºå®Œæˆï¼</strong> ç°åœ¨å¯ä»¥å¼€å§‹å®ç°å„ä¸ªå¾®æœåŠ¡äº†ã€‚</p>`,80)])])}const b=a(l,[["render",p]]);export{d as __pageData,b as default};
