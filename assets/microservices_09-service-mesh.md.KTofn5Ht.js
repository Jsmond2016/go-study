import{_ as i,c as a,o as n,ag as l}from"./chunks/framework.mZxFZN4m.js";const c=JSON.parse('{"title":"æœåŠ¡ç½‘æ ¼","description":"","frontmatter":{"title":"æœåŠ¡ç½‘æ ¼","difficulty":"advanced","duration":"6-8å°æ—¶","prerequisites":["å¾®æœåŠ¡æ¶æ„","Kubernetes","å®¹å™¨åŒ–"],"tags":["æœåŠ¡ç½‘æ ¼","Istio","æµé‡ç®¡ç†","å¯è§‚æµ‹æ€§","å®‰å…¨"]},"headers":[],"relativePath":"microservices/09-service-mesh.md","filePath":"microservices/09-service-mesh.md","lastUpdated":1763896592000}'),e={name:"microservices/09-service-mesh.md"};function t(p,s,h,r,k,d){return n(),a("div",null,[...s[0]||(s[0]=[l(`<h1 id="æœåŠ¡ç½‘æ ¼" tabindex="-1">æœåŠ¡ç½‘æ ¼ <a class="header-anchor" href="#æœåŠ¡ç½‘æ ¼" aria-label="Permalink to &quot;æœåŠ¡ç½‘æ ¼&quot;">â€‹</a></h1><p>æœåŠ¡ç½‘æ ¼æ˜¯å¾®æœåŠ¡æ¶æ„ä¸­çš„åŸºç¡€è®¾æ–½å±‚ï¼Œå®ƒå¤„ç†æœåŠ¡ä¹‹é—´çš„é€šä¿¡ï¼Œæä¾›æµé‡ç®¡ç†ã€å®‰å…¨ã€å¯è§‚æµ‹æ€§ç­‰åŠŸèƒ½ã€‚</p><h2 id="ğŸ“‹-å­¦ä¹ ç›®æ ‡" tabindex="-1">ğŸ“‹ å­¦ä¹ ç›®æ ‡ <a class="header-anchor" href="#ğŸ“‹-å­¦ä¹ ç›®æ ‡" aria-label="Permalink to &quot;ğŸ“‹ å­¦ä¹ ç›®æ ‡&quot;">â€‹</a></h2><p>å®Œæˆæœ¬æ•™ç¨‹åï¼Œä½ å°†èƒ½å¤Ÿï¼š</p><ul class="contains-task-list"><li class="task-list-item enabled"><input class="task-list-item-checkbox" type="checkbox"> ç†è§£æœåŠ¡ç½‘æ ¼çš„æ¦‚å¿µå’Œæ¶æ„</li><li class="task-list-item enabled"><input class="task-list-item-checkbox" type="checkbox"> äº†è§£ Istio æœåŠ¡ç½‘æ ¼</li><li class="task-list-item enabled"><input class="task-list-item-checkbox" type="checkbox"> å®ç°æµé‡ç®¡ç†ï¼ˆè·¯ç”±ã€è´Ÿè½½å‡è¡¡ï¼‰</li><li class="task-list-item enabled"><input class="task-list-item-checkbox" type="checkbox"> å®ç°å®‰å…¨ç­–ç•¥ï¼ˆmTLSã€è®¤è¯ï¼‰</li><li class="task-list-item enabled"><input class="task-list-item-checkbox" type="checkbox"> å®ç°å¯è§‚æµ‹æ€§ï¼ˆè¿½è¸ªã€æŒ‡æ ‡ã€æ—¥å¿—ï¼‰</li><li class="task-list-item enabled"><input class="task-list-item-checkbox" type="checkbox"> éƒ¨ç½²å’Œç®¡ç†æœåŠ¡ç½‘æ ¼</li></ul><h2 id="ğŸ¯-æœåŠ¡ç½‘æ ¼ç®€ä»‹" tabindex="-1">ğŸ¯ æœåŠ¡ç½‘æ ¼ç®€ä»‹ <a class="header-anchor" href="#ğŸ¯-æœåŠ¡ç½‘æ ¼ç®€ä»‹" aria-label="Permalink to &quot;ğŸ¯ æœåŠ¡ç½‘æ ¼ç®€ä»‹&quot;">â€‹</a></h2><h3 id="ä»€ä¹ˆæ˜¯æœåŠ¡ç½‘æ ¼" tabindex="-1">ä»€ä¹ˆæ˜¯æœåŠ¡ç½‘æ ¼ <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯æœåŠ¡ç½‘æ ¼" aria-label="Permalink to &quot;ä»€ä¹ˆæ˜¯æœåŠ¡ç½‘æ ¼&quot;">â€‹</a></h3><p>æœåŠ¡ç½‘æ ¼æ˜¯å¾®æœåŠ¡æ¶æ„ä¸­çš„åŸºç¡€è®¾æ–½å±‚ï¼Œå®ƒå¤„ç†æœåŠ¡ä¹‹é—´çš„é€šä¿¡ï¼Œæä¾›ï¼š</p><ul><li><strong>æµé‡ç®¡ç†</strong>ï¼šè·¯ç”±ã€è´Ÿè½½å‡è¡¡ã€ç†”æ–­</li><li><strong>å®‰å…¨</strong>ï¼šmTLSã€è®¤è¯ã€æˆæƒ</li><li><strong>å¯è§‚æµ‹æ€§</strong>ï¼šè¿½è¸ªã€æŒ‡æ ‡ã€æ—¥å¿—</li><li><strong>ç­–ç•¥</strong>ï¼šé™æµã€é‡è¯•ã€è¶…æ—¶</li></ul><h3 id="æœåŠ¡ç½‘æ ¼æ¶æ„" tabindex="-1">æœåŠ¡ç½‘æ ¼æ¶æ„ <a class="header-anchor" href="#æœåŠ¡ç½‘æ ¼æ¶æ„" aria-label="Permalink to &quot;æœåŠ¡ç½‘æ ¼æ¶æ„&quot;">â€‹</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>åº”ç”¨æœåŠ¡ â†’ Sidecar ä»£ç† â†’ æœåŠ¡ç½‘æ ¼æ§åˆ¶å¹³é¢</span></span>
<span class="line"><span>    â†“            â†“              â†“</span></span>
<span class="line"><span>ä¸šåŠ¡é€»è¾‘    æµé‡ç®¡ç†        é…ç½®ç®¡ç†</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="ä¸ºä»€ä¹ˆéœ€è¦æœåŠ¡ç½‘æ ¼" tabindex="-1">ä¸ºä»€ä¹ˆéœ€è¦æœåŠ¡ç½‘æ ¼ <a class="header-anchor" href="#ä¸ºä»€ä¹ˆéœ€è¦æœåŠ¡ç½‘æ ¼" aria-label="Permalink to &quot;ä¸ºä»€ä¹ˆéœ€è¦æœåŠ¡ç½‘æ ¼&quot;">â€‹</a></h3><p><strong>ä¼˜åŠ¿</strong>ï¼š</p><ol><li><strong>è§£è€¦</strong>ï¼šä¸šåŠ¡ä»£ç ä¸åŸºç¡€è®¾æ–½è§£è€¦</li><li><strong>ç»Ÿä¸€</strong>ï¼šç»Ÿä¸€çš„æœåŠ¡é—´é€šä¿¡</li><li><strong>å¯è§‚æµ‹</strong>ï¼šè‡ªåŠ¨æ”¶é›†æŒ‡æ ‡å’Œè¿½è¸ª</li><li><strong>å®‰å…¨</strong>ï¼šè‡ªåŠ¨ mTLS åŠ å¯†</li><li><strong>ç­–ç•¥</strong>ï¼šç»Ÿä¸€çš„ç­–ç•¥ç®¡ç†</li></ol><h2 id="ğŸ”§-istio-æœåŠ¡ç½‘æ ¼" tabindex="-1">ğŸ”§ Istio æœåŠ¡ç½‘æ ¼ <a class="header-anchor" href="#ğŸ”§-istio-æœåŠ¡ç½‘æ ¼" aria-label="Permalink to &quot;ğŸ”§ Istio æœåŠ¡ç½‘æ ¼&quot;">â€‹</a></h2><h3 id="ä»€ä¹ˆæ˜¯-istio" tabindex="-1">ä»€ä¹ˆæ˜¯ Istio <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯-istio" aria-label="Permalink to &quot;ä»€ä¹ˆæ˜¯ Istio&quot;">â€‹</a></h3><p>Istio æ˜¯ Googleã€IBM å’Œ Lyft å¼€æºçš„æœåŠ¡ç½‘æ ¼ï¼Œæä¾›ï¼š</p><ul><li>æµé‡ç®¡ç†</li><li>å®‰å…¨ç­–ç•¥</li><li>å¯è§‚æµ‹æ€§</li><li>ç­–ç•¥æ‰§è¡Œ</li></ul><h3 id="å®‰è£…-istio" tabindex="-1">å®‰è£… Istio <a class="header-anchor" href="#å®‰è£…-istio" aria-label="Permalink to &quot;å®‰è£… Istio&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä¸‹è½½ Istio</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -L</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://istio.io/downloadIstio</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> sh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> istio-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®‰è£… Istio</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">istioctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> profile=demo</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¯ç”¨è‡ªåŠ¨æ³¨å…¥</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">kubectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> label</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> namespace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> default</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> istio-injection=enabled</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="æµé‡ç®¡ç†" tabindex="-1">æµé‡ç®¡ç† <a class="header-anchor" href="#æµé‡ç®¡ç†" aria-label="Permalink to &quot;æµé‡ç®¡ç†&quot;">â€‹</a></h3><h4 id="_1-è™šæ‹ŸæœåŠ¡-virtualservice" tabindex="-1">1. è™šæ‹ŸæœåŠ¡ï¼ˆVirtualServiceï¼‰ <a class="header-anchor" href="#_1-è™šæ‹ŸæœåŠ¡-virtualservice" aria-label="Permalink to &quot;1. è™šæ‹ŸæœåŠ¡ï¼ˆVirtualServiceï¼‰&quot;">â€‹</a></h4><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">networking.istio.io/v1beta1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">VirtualService</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">reviews</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  hosts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">reviews</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  http</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">match</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">headers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        end-user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          exact</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">jason</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    route</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">destination</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        host</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">reviews</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        subset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">v2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">route</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">destination</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        host</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">reviews</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        subset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">v1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h4 id="_2-ç›®æ ‡è§„åˆ™-destinationrule" tabindex="-1">2. ç›®æ ‡è§„åˆ™ï¼ˆDestinationRuleï¼‰ <a class="header-anchor" href="#_2-ç›®æ ‡è§„åˆ™-destinationrule" aria-label="Permalink to &quot;2. ç›®æ ‡è§„åˆ™ï¼ˆDestinationRuleï¼‰&quot;">â€‹</a></h4><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">networking.istio.io/v1beta1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">DestinationRule</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">reviews</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  host</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">reviews</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  subsets</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    labels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">v1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">v2</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    labels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">v2</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="å®‰å…¨ç­–ç•¥" tabindex="-1">å®‰å…¨ç­–ç•¥ <a class="header-anchor" href="#å®‰å…¨ç­–ç•¥" aria-label="Permalink to &quot;å®‰å…¨ç­–ç•¥&quot;">â€‹</a></h3><h4 id="_1-å¯ç”¨-mtls" tabindex="-1">1. å¯ç”¨ mTLS <a class="header-anchor" href="#_1-å¯ç”¨-mtls" aria-label="Permalink to &quot;1. å¯ç”¨ mTLS&quot;">â€‹</a></h4><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">security.istio.io/v1beta1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">PeerAuthentication</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">default</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  mtls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">STRICT</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_2-æˆæƒç­–ç•¥" tabindex="-1">2. æˆæƒç­–ç•¥ <a class="header-anchor" href="#_2-æˆæƒç­–ç•¥" aria-label="Permalink to &quot;2. æˆæƒç­–ç•¥&quot;">â€‹</a></h4><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">security.istio.io/v1beta1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">AuthorizationPolicy</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">httpbin-policy</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  selector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    matchLabels</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      app</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">httpbin</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ALLOW</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  rules</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        principals</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cluster.local/ns/default/sa/sleep&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="å¯è§‚æµ‹æ€§" tabindex="-1">å¯è§‚æµ‹æ€§ <a class="header-anchor" href="#å¯è§‚æµ‹æ€§" aria-label="Permalink to &quot;å¯è§‚æµ‹æ€§&quot;">â€‹</a></h3><p>Istio è‡ªåŠ¨æä¾›ï¼š</p><ul><li><strong>è¿½è¸ª</strong>ï¼šåˆ†å¸ƒå¼è¿½è¸ªï¼ˆJaegerï¼‰</li><li><strong>æŒ‡æ ‡</strong>ï¼šPrometheus æŒ‡æ ‡</li><li><strong>æ—¥å¿—</strong>ï¼šè®¿é—®æ—¥å¿—</li></ul><h2 id="ğŸ’¡-æœ€ä½³å®è·µ" tabindex="-1">ğŸ’¡ æœ€ä½³å®è·µ <a class="header-anchor" href="#ğŸ’¡-æœ€ä½³å®è·µ" aria-label="Permalink to &quot;ğŸ’¡ æœ€ä½³å®è·µ&quot;">â€‹</a></h2><h3 id="_1-æ¸è¿›å¼é‡‡ç”¨" tabindex="-1">1. æ¸è¿›å¼é‡‡ç”¨ <a class="header-anchor" href="#_1-æ¸è¿›å¼é‡‡ç”¨" aria-label="Permalink to &quot;1. æ¸è¿›å¼é‡‡ç”¨&quot;">â€‹</a></h3><ul><li>ä»å•ä¸ªæœåŠ¡å¼€å§‹</li><li>é€æ­¥æ‰©å±•åˆ°æ‰€æœ‰æœåŠ¡</li><li>ç›‘æ§æ€§èƒ½å½±å“</li></ul><h3 id="_2-æ€§èƒ½ä¼˜åŒ–" tabindex="-1">2. æ€§èƒ½ä¼˜åŒ– <a class="header-anchor" href="#_2-æ€§èƒ½ä¼˜åŒ–" aria-label="Permalink to &quot;2. æ€§èƒ½ä¼˜åŒ–&quot;">â€‹</a></h3><ul><li>ä½¿ç”¨ Sidecar ä»£ç†</li><li>ä¼˜åŒ–èµ„æºé™åˆ¶</li><li>ç›‘æ§å»¶è¿Ÿ</li></ul><h3 id="_3-å®‰å…¨é…ç½®" tabindex="-1">3. å®‰å…¨é…ç½® <a class="header-anchor" href="#_3-å®‰å…¨é…ç½®" aria-label="Permalink to &quot;3. å®‰å…¨é…ç½®&quot;">â€‹</a></h3><ul><li>å¯ç”¨ mTLS</li><li>é…ç½®æˆæƒç­–ç•¥</li><li>å®šæœŸæ›´æ–°</li></ul><h2 id="ğŸš€-æ€»ç»“" tabindex="-1">ğŸš€ æ€»ç»“ <a class="header-anchor" href="#ğŸš€-æ€»ç»“" aria-label="Permalink to &quot;ğŸš€ æ€»ç»“&quot;">â€‹</a></h2><p>æœåŠ¡ç½‘æ ¼æ˜¯å¾®æœåŠ¡æ¶æ„ä¸­çš„é‡è¦åŸºç¡€è®¾æ–½ï¼Œé€šè¿‡ Istioï¼Œæˆ‘ä»¬å¯ä»¥ï¼š</p><ol><li><strong>ç»Ÿä¸€ç®¡ç†</strong>ï¼šç»Ÿä¸€çš„æœåŠ¡é—´é€šä¿¡</li><li><strong>å¢å¼ºå®‰å…¨</strong>ï¼šè‡ªåŠ¨ mTLS å’Œæˆæƒ</li><li><strong>æå‡å¯è§‚æµ‹æ€§</strong>ï¼šè‡ªåŠ¨æ”¶é›†æŒ‡æ ‡å’Œè¿½è¸ª</li><li><strong>ç®€åŒ–è¿ç»´</strong>ï¼šé›†ä¸­ç®¡ç†ç­–ç•¥</li></ol><h2 id="ğŸ“š-æ‰©å±•é˜…è¯»" tabindex="-1">ğŸ“š æ‰©å±•é˜…è¯» <a class="header-anchor" href="#ğŸ“š-æ‰©å±•é˜…è¯»" aria-label="Permalink to &quot;ğŸ“š æ‰©å±•é˜…è¯»&quot;">â€‹</a></h2><ul><li><a href="https://istio.io/latest/docs/" target="_blank" rel="noreferrer">Istio å®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://istio.io/latest/docs/ops/best-practices/" target="_blank" rel="noreferrer">æœåŠ¡ç½‘æ ¼æœ€ä½³å®è·µ</a></li></ul><h2 id="â­ï¸-ä¸‹ä¸€æ­¥" tabindex="-1">â­ï¸ ä¸‹ä¸€æ­¥ <a class="header-anchor" href="#â­ï¸-ä¸‹ä¸€æ­¥" aria-label="Permalink to &quot;â­ï¸ ä¸‹ä¸€æ­¥&quot;">â€‹</a></h2><p>å®Œæˆå¾®æœåŠ¡å­¦ä¹ åï¼Œå¯ä»¥è¿›å…¥ï¼š</p><ul><li><a href="./../devops/">è¿ç»´éƒ¨ç½²</a> - å®¹å™¨åŒ–å’Œéƒ¨ç½²</li><li><a href="./../projects/">å®æˆ˜é¡¹ç›®</a> - å®Œæ•´é¡¹ç›®å¼€å‘</li></ul><hr><p><strong>ğŸ‰ æ­å–œï¼</strong> ä½ å·²ç»æŒæ¡äº†æœåŠ¡ç½‘æ ¼çš„åŸºç¡€çŸ¥è¯†ã€‚ç»§ç»­å­¦ä¹ ï¼Œæ„å»ºæ›´å¼ºå¤§çš„å¾®æœåŠ¡ç³»ç»Ÿï¼</p>`,50)])])}const o=i(e,[["render",t]]);export{c as __pageData,o as default};
