# 运算符示例

本示例展示了 Go 语言中的各种运算符及其使用方法。

## 运行示例

```bash
go run main.go
```

## 知识点

### 1. 算术运算符

- `+`：加法
- `-`：减法
- `*`：乘法
- `/`：除法（整数除法会截断小数部分）
- `%`：取模（求余数）
- `++`：自增（只能作为语句使用，不能用于表达式）
- `--`：自减（只能作为语句使用，不能用于表达式）

### 2. 关系运算符

- `==`：等于
- `!=`：不等于
- `>`：大于
- `<`：小于
- `>=`：大于等于
- `<=`：小于等于

**注意**：关系运算符的结果总是 `bool` 类型。

### 3. 逻辑运算符

- `&&`：逻辑与（AND）
- `||`：逻辑或（OR）
- `!`：逻辑非（NOT）

**短路求值**：
- `&&`：如果第一个操作数为 `false`，不会评估第二个操作数
- `||`：如果第一个操作数为 `true`，不会评估第二个操作数

### 4. 位运算符

- `&`：按位与
- `|`：按位或
- `^`：按位异或
- `&^`：位清除（AND NOT）
- `<<`：左移
- `>>`：右移

**实际应用**：
- 设置特定位：`value | (1 << position)`
- 清除特定位：`value &^ (1 << position)`
- 切换特定位：`value ^ (1 << position)`
- 检查特定位：`(value & (1 << position)) != 0`

### 5. 赋值运算符

- `=`：简单赋值
- `+=`：加法赋值
- `-=`：减法赋值
- `*=`：乘法赋值
- `/=`：除法赋值
- `%=`：取模赋值
- `&=`：按位与赋值
- `|=`：按位或赋值
- `^=`：按位异或赋值
- `<<=`：左移赋值
- `>>=`：右移赋值

### 6. 特殊运算符

- `&`：取地址运算符
- `*`：指针解引用运算符
- `<-`：通道发送/接收操作符
- `.(type)`：类型断言
- `switch x.(type)`：类型选择

### 7. 运算符优先级

从高到低的优先级顺序：

1. 最高优先级：`()` `[]` `.`
2. 一元运算符：`!` `~` `*` `&` `<-`
3. 乘法和移位：`*` `/` `%` `<<` `>>` `&` `&^`
4. 加法和位或：`+` `-` `|` `^`
5. 比较运算：`==` `!=` `<` `<=` `>` `>=`
6. 逻辑与：`&&`
7. 逻辑或：`||`
8. 最低优先级：赋值运算符

## 实际应用技巧

### 1. 数学计算

```go
// 奇偶数判断
if num%2 == 0 {
    fmt.Println("偶数")
} else {
    fmt.Println("奇数")
}

// 闰年判断
if year%400 == 0 || (year%4 == 0 && year%100 != 0) {
    fmt.Println("闰年")
}
```

### 2. 性能优化

```go
// 乘法优化（乘以2的幂）
result := x * 8  // 可以用 x << 3 替代

// 除法优化（除以2的幂）
result := x / 8  // 可以用 x >> 3 替代
```

### 3. 位操作

```go
// 标志位操作
const (
    FlagA = 1 << iota  // 1
    FlagB              // 2
    FlagC              // 4
    FlagD              // 8
)

flags := FlagA | FlagC  // 设置标志A和C
flags &^= FlagA         // 清除标志A
hasFlagB := (flags & FlagB) != 0  // 检查是否有标志B
```

## 常见陷阱

1. **整数除法截断**：Go 中整数除法会截断小数部分
2. **自增自减位置**：只能作为语句使用，不能用于表达式
3. **运算符优先级**：复杂表达式建议使用括号明确优先级
4. **类型匹配**：运算符两边的类型必须匹配

## 练习

1. 实现一个计算器，支持基本的四则运算
2. 使用位运算实现一个权限管理系统
3. 编写程序验证闰年判断逻辑
4. 使用位运算优化乘法和除法运算
5. 实现一个简单的状态机，使用位标志表示状态